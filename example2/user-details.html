<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<style>

</style>
<body>


<script>


    let url = new URL(location.href)
    let id = url.searchParams.get('id')


    fetch(`https://jsonplaceholder.typicode.com/posts/${id}`)

        .then(data=> data.json())
        .then(info =>{
            let div = document.createElement('div')
            document.body.appendChild(div)

            function recursion(item){
                for (const itemElement in item) {
                    if (typeof item[itemElement] !=='object'){
                        let p = document.createElement('p')
                        p.append(`${itemElement} - ${item[itemElement]}`)
                        div.appendChild(p)
                    }else {
                        recursion(item[itemElement])
                    }
                }
            }
            recursion(info)

        })

    let btnDiv = document.createElement('div')
    let btn = document.createElement("button")
    btn.innerText = 'post of current user'
    btnDiv.appendChild(btn)
    document.body.appendChild(btnDiv)

    btn.onclick = function (){
        fetch(`https://jsonplaceholder.typicode.com/users/${id}/posts`)
            .then(resp => resp.json())
            .then(coments =>{
                for (const coment of coments) {
                    let div = document.createElement('div')
                    div.innerText = `ID-${coment.id}, comment : ${coment.title}`
                    let btnPosts = document.createElement('button')
                    btnPosts.innerText = 'click'
                    btnPosts.onclick = function (){
                        location.href = `post-details.html?id=${coment.id}`
                    }
                    div.append(btnPosts)
                    document.body.appendChild(div)
                }
            })
    }



</script>
</body>
</html>